(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{74:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return p}));var a=n(3),o=n(7),r=(n(0),n(86)),s={id:"02-node-backend",title:"Your first Node/Express Backend",sidebar_label:"Node/Express Backend",slug:"/tutorials/node-backend"},i={unversionedId:"03-tutorials/02-node-backend",id:"03-tutorials/02-node-backend",isDocsHomePage:!1,title:"Your first Node/Express Backend",description:"In this tutorial, you will learn how to develop a simple backend to authenticate users.",source:"@site/docs/03-tutorials/02-node-backend.md",slug:"/tutorials/node-backend",permalink:"/tutorials/node-backend",editUrl:"https://github.com/laurensk/docs.laurensk.at/edit/master/docs/docs/03-tutorials/02-node-backend.md",version:"current",sidebar_label:"Node/Express Backend",sidebar:"mainSidebar",previous:{title:"Welcome",permalink:"/"},next:{title:"ECMAScript 6 (ES6)",permalink:"/tutorials/es6"}},l=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Getting Started",id:"getting-started",children:[]},{value:"Installing Dependencies",id:"installing-dependencies",children:[]},{value:"Developing the Backend",id:"developing-the-backend",children:[]},{value:"Run your application",id:"run-your-application",children:[]},{value:"Implement user validation",id:"implement-user-validation",children:[]},{value:"Implement routes",id:"implement-routes",children:[]},{value:"Test the API",id:"test-the-api",children:[]},{value:"Write docs with OpenAPI/Swagger",id:"write-docs-with-openapiswagger",children:[]},{value:"Develop the Frontend",id:"develop-the-frontend",children:[]}],c={toc:l};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"In this tutorial, you will learn how to develop a simple backend to authenticate users."),"\n",Object(r.b)("strong",{parentName:"p"},"Later on, we will also develop a small frontend to interact with our API.")),Object(r.b)("p",null,"In addition, there will be a small introduction to OpenAPI/Swagger, which allows you to write intuitive API documentations."),Object(r.b)("h3",{id:"prerequisites"},"Prerequisites"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Make sure you have ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("a",Object(a.a)({parentName:"strong"},{href:"https://nodejs.org/en/download/"}),"NodeJS"))," installed. You can check this by typing ",Object(r.b)("inlineCode",{parentName:"li"},"node --version")," into your terminal."),Object(r.b)("li",{parentName:"ul"},"Also, ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("a",Object(a.a)({parentName:"strong"},{href:"https://nodejs.org/en/download/"}),"npm")),", the Node package manager should also work. Check with ",Object(r.b)("inlineCode",{parentName:"li"},"npm --version"),"."),Object(r.b)("li",{parentName:"ul"},"Choose your preferred code editor. For this tutorial, we will use ",Object(r.b)("strong",{parentName:"li"},"Visual Studio Code"),"."),Object(r.b)("li",{parentName:"ul"},"Install ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("a",Object(a.a)({parentName:"strong"},{href:"https://www.postman.com/downloads/"}),"Postman")),", the free tool to test our API.")),Object(r.b)("h3",{id:"getting-started"},"Getting Started"),Object(r.b)("p",null,"First, we need to create a new folder where our backend code will be stored.\nFor this case, you can choose something like ",Object(r.b)("inlineCode",{parentName:"p"},"my-backend"),".\nNext, you have to open this folder in VS Code and open a terminal to the bottom."),Object(r.b)("p",null,"Make sure you are in the correct folder and run ",Object(r.b)("inlineCode",{parentName:"p"},"npm init -y")," to initialise a new Node project.\nSince we will use JavaScript for this tutorial, there is no need to configure TypeScript."),Object(r.b)("p",null,"After that, you will see a new file in your project. It is called ",Object(r.b)("strong",{parentName:"p"},"package.json")," and it will contain all your dependencies."),Object(r.b)("h3",{id:"installing-dependencies"},"Installing Dependencies"),Object(r.b)("p",null,"We want to create a backend, so we need a web server. In this case, the best option is to use ",Object(r.b)("strong",{parentName:"p"},"Express"),", which is a very popular backend framework for Node."),Object(r.b)("p",null,"To install everything we need for this tutorial, run the following command: ",Object(r.b)("inlineCode",{parentName:"p"},"npm install express cors"),"."),Object(r.b)("p",null,"After that, you will see a new folder in your project, called ",Object(r.b)("inlineCode",{parentName:"p"},"node_modules"),". This folder contains the actual code of the installed dependencies, so we can ignore it. ",Object(r.b)("em",{parentName:"p"},"Note: If you want to upload your project to GitHub, you want to exclude this folder.")),Object(r.b)("h3",{id:"developing-the-backend"},"Developing the Backend"),Object(r.b)("p",null,"So, now we are finally ready to start coding. Create a new file called ",Object(r.b)("inlineCode",{parentName:"p"},"index.js")," and open it."),Object(r.b)("p",null,"First, we need to import the dependencies."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const express = require('express');\nconst cors = require('cors');\n")),Object(r.b)("p",null,"Next up, we want to create our Express application."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const app = express();\n")),Object(r.b)("p",null,"Since we want our responses to be in the JSON format and allow every domain to connect to your backend, we have to do a few additional steps."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"app.use(express.json());\napp.use(cors());\n")),Object(r.b)("p",null,"Lastly, we can start our backend service locally on a specific port. Additionally, we can define a message to be displayed when the API is started successfully."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'app.listen(3001, () => console.log("Y`our backend is running!"));\n')),Object(r.b)("p",null,"In this case, the port is ",Object(r.b)("inlineCode",{parentName:"p"},"3001"),", but you can choose a different one for yourself."),Object(r.b)("p",null,"Your code should look something like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const express = require('express');\nconst cors = require('cors');\n\nconst app = express();\n\napp.use(express.json());\napp.use(cors());\n\n// Implement new stuff here\n\napp.listen(3001, () => console.log(\"Your backend is running!\"));\n")),Object(r.b)("h3",{id:"run-your-application"},"Run your application"),Object(r.b)("p",null,"Now, we are at a point where we can start our application the first time.\nIf you run ",Object(r.b)("inlineCode",{parentName:"p"},"node index.js"),", you will see the message you defined earlier. In my case, its ",Object(r.b)("inlineCode",{parentName:"p"},"Your backend is running!"),"."),Object(r.b)("p",null,"Since our backend can not do anything, we can stop it with ",Object(r.b)("inlineCode",{parentName:"p"},"Ctrl + c"),"."),Object(r.b)("h3",{id:"implement-user-validation"},"Implement user validation"),Object(r.b)("p",null,"Next up, we will define an array of users with their passwords as well as a function to check if a combination of username and password is correct."),Object(r.b)("p",null,"Please make sure you implement to following features in the correct spot. See the last code block for exact information."),Object(r.b)("p",null,"The array of users will look something like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'const users = [{ username: "laurens", password: "test" }, { username: "po", password: "best_teacher" }];\n')),Object(r.b)("p",null,"Also, we need a function to validate a combination of username and password."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const checkCredentials = (username, password) => {\n    for (const user of users) {\n        if (user.username == username && user.password == password) return true;\n    }\n    return false;\n}\n")),Object(r.b)("p",null,"This functions takes username and password and returns if this combination of username and password exists."),Object(r.b)("p",null,"Your code should look something like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'const express = require(\'express\');\nconst cors = require(\'cors\');\n\nconst app = express();\n\napp.use(express.json());\napp.use(cors());\n\nconst users = [{ username: "laurens", password: "test" }, { username: "po", password: "best_teacher" }];\n\nconst checkCredentials = (username, password) => {\n    for (const user of users) {\n        if (user.username == username && user.password == password) return true;\n    }\n    return false;\n}\n\n// Implement routes here\n\napp.listen(3001, () => console.log("Your backend is running!"));\n')),Object(r.b)("h3",{id:"implement-routes"},"Implement routes"),Object(r.b)("p",null,"Routes are things your API can do. For this tutorial, we will only create a single route.\nThere are multiple HTTP methods you can use. Here is an overview about the most common ones."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"GET"),": Used to get data from the Backend."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"POST"),": Used to create something on the Backend."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"PUT"),": Used to edit something."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"DELETE"),": This one is self explanatory.")),Object(r.b)("p",null,"But there is more: ",Object(r.b)("strong",{parentName:"p"},"POST")," and ",Object(r.b)("strong",{parentName:"p"},"PUT"),' can have a so-called "request body" whereas ',Object(r.b)("strong",{parentName:"p"},"GET")," and ",Object(r.b)("strong",{parentName:"p"},"DELETE")," can not."),Object(r.b)("p",null,"The request body is (at least for this tutorial) a JSON which can be sent to the server.\nWe will need it to transfer username and password to the server. So the best method to use is ",Object(r.b)("strong",{parentName:"p"},"POST"),"."),Object(r.b)("p",null,"Please make sure you implement to following route in the correct spot. See the last code block for exact information."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'app.post("/login", (req, res) => {\n    // This is the route\n});\n')),Object(r.b)("p",null,"The ",Object(r.b)("strong",{parentName:"p"},"POST")," method takes a string, which is the actual route, in this case ",Object(r.b)("inlineCode",{parentName:"p"},"/login")," and a callback method with ",Object(r.b)("inlineCode",{parentName:"p"},"req")," and ",Object(r.b)("inlineCode",{parentName:"p"},"res"),", which stands for request and response."),Object(r.b)("p",null,"In this function, we can now implement the validation and a response back. Your code should then look something like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'app.post("/login", (req, res) => {\n    const result = checkCredentials(req.body.username, req.body.password)\n    res.json({ success: result });\n});\n')),Object(r.b)("p",null,"Note the ",Object(r.b)("inlineCode",{parentName:"p"},"req.body.username")," and ",Object(r.b)("inlineCode",{parentName:"p"},"req.body.password"),". That is the way we can get the username and password from the request body.\nWith ",Object(r.b)("inlineCode",{parentName:"p"},"res.json()"),", we can send the result back."),Object(r.b)("p",null,"Your final code should look something like this:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'const express = require(\'express\');\nconst cors = require(\'cors\');\n\nconst app = express();\n\napp.use(express.json());\napp.use(cors());\n\nconst users = [{ username: "laurens", password: "test" }, { username: "po", password: "best_teacher" }];\n\nconst checkCredentials = (username, password) => {\n    for (const user of users) {\n        if (user.username == username && user.password == password) return true;\n    }\n    return false;\n}\n\napp.post("/login", (req, res) => {\n    const result = checkCredentials(req.body.username, req.body.password)\n    res.json({ success: result });\n});\n\napp.listen(3001, () => console.log("Your backend is running!"));\n')),Object(r.b)("p",null,"Done, take a deep breath."),Object(r.b)("p",null,"We can now start our service once again by typing ",Object(r.b)("inlineCode",{parentName:"p"},"node index.js")," into the terminal."),Object(r.b)("h3",{id:"test-the-api"},"Test the API"),Object(r.b)("p",null,"As mentioned earlier, we can test our API with a free tool called ",Object(r.b)("strong",{parentName:"p"},Object(r.b)("a",Object(a.a)({parentName:"strong"},{href:"https://www.postman.com/downloads/"}),"Postman")),"."),Object(r.b)("p",null,"Please watch the video on how to test your API with Postman."),Object(r.b)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/nIrR2ayY00U",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),Object(r.b)("h3",{id:"write-docs-with-openapiswagger"},"Write docs with OpenAPI/Swagger"),Object(r.b)("p",null,"Please watch the video on how to write docs with OpenAPI/Swagger."),Object(r.b)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/wh1CZ82vJI0",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),Object(r.b)("h3",{id:"develop-the-frontend"},"Develop the Frontend"),Object(r.b)("p",null,"Please watch the video on how to develop the frontend."),Object(r.b)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/ocnRCf4EMsw",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}))}p.isMDXComponent=!0}}]);